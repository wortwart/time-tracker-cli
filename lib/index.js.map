{"version":3,"sources":["../src/index.js"],"names":["config","name","tasks","pkg","notify","manager","EXEC","version","description","option","command","alias","action","key","Array","isArray","join","startTask","pauseTasks","unpauseTasks","stopTask","text","addDescription","stringTime","modifyTask","summarize","rate","search","full","timespan","setInterval","getTime","process","stdout","write","moveCursor","console","log","JSON","stringify","getTasksJson","string","delete","value","configure","getConfig","getStatus","parse","argv","updateDB","update","outputHelp","exit"],"mappings":"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","file":"index.js","sourcesContent":["import 'babel-polyfill'\n\nimport program from 'commander'\nimport updateNotifier from 'update-notifier'\nimport Configstore from 'configstore'\nimport pkg from '../package.json'\n\nimport Manager from './core/Manager'\nimport {humanParseDiff} from './core/utils'\nimport {outputVertical, cliError, outputConfig} from './core/output'\n\nimport autocomplete from './autocomplete'\n\nconst config = new Configstore(pkg.name, {\n\ttasks: {},\n\tconfig: {'format.output': 'DD/MM'}\n})\n\nupdateNotifier({pkg}).notify()\n\nconst manager = new Manager(config)\nautocomplete(config)\n\n//Exec\nlet EXEC = false\n\nprogram\n\t.version(pkg.version)\n\t.description('Tiny time tracker for projects')\n\t.option('--updateDB', 'Bool to update the db')\n\nprogram\n\t.command('start <task_key> [description]')\n\t.description('Start task with a description.')\n\t.alias('s')\n\t.action(function(key, description) {\n\t\tdescription = (description) ? Array.isArray(description) ? description.join(' ') : description : null\n\t\tmanager.startTask(key, description)\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('pause [task_key]')\n\t.description('Pause task(s)')\n\t.alias('p')\n\t.action(function(key) {\n\t\tmanager.pauseTasks(key)\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('unpause [task_key]')\n\t.description('Unpause task(s)')\n\t.alias('up')\n\t.action(function(key) {\n\t\tmanager.unpauseTasks(key)\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('finish <task_key> [description]')\n\t.description('Stop task, you can add a description')\n\t.alias('f')\n\t.action(function(key, description) {\n\t\tdescription = (description) ? Array.isArray(description) ? description.join(' ') : description : null\n\t\tmanager.stopTask(key, description)\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('description <task_key> <descriptionText...>')\n\t.description('Add description to your task.')\n\t.alias('d')\n\t.action(function(key, text) {\n\t\ttext = Array.isArray(text) ? text.join(' ') : text\n\t\tmanager.addDescription(key, text)\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('add <task_key> <stringTime>')\n\t.description('Adds time to a task. Example: \"1h2m3s\"')\n\t.action(function(key, stringTime) {\n\t\tmanager.modifyTask('add', key, stringTime)\n\t\tmanager.summarize({key: key, rate: manager.search(key), full: false})\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('subtract <task_key> <stringTime>')\n\t.description('Subtract time to a task. Example: \"1h2m3s\"')\n\t.alias('sub')\n\t.action(function(key, stringTime) {\n\t\tmanager.modifyTask('subtract', key, stringTime)\n\t\tmanager.summarize({key: key, rate: manager.search(key), full: false})\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('report [task_string] [rate]')\n\t.description('Report time of the tasks, empty for select all tasks. Can pass a rate (1h).')\n\t.alias('r')\n\t.action(function(tasks, rate) {\n\t\ttasks = (tasks) ? tasks : 'all'\n\t\tmanager.summarize({key: tasks, rate: rate})\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('summarize [task_string] [timespan]')\n\t.description('Summarize time of the tasks, empty for select all tasks. Can pass a timespan (1h).')\n\t.alias('sum')\n\t.action(function(tasks, timespan) {\n\t\ttasks = (tasks) ? tasks : 'all'\n\t\tmanager.summarize({key: tasks, timespan: timespan})\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('log <task_key>')\n\t.description('Logs the time of the  task')\n\t.alias('l')\n\t.action(function(key) {\n\t\tsetInterval(() => {\n\t\t\tlet text = outputVertical('Task:', key, humanParseDiff(manager.getTime(key)))\n\t\t\tprocess.stdout.write(text)\n\t\t\tprocess.stdout.moveCursor(0,-2)\n\t\t}, 1000)\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('export')\n\t.description('Export the tasks in a JSON')\n\t.alias('e')\n\t.action(function(key) {\n\t\tconsole.log(JSON.stringify(manager.getTasksJson(), null, 4))\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('delete [task_string]')\n\t.description('Remove tasks from the list. Empty for select all tasks')\n\t.alias('del')\n\t.action(function(string) {\n\t\tstring = (string) ? string : 'all'\n\t\tmanager.delete(string)\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('configure <key> <value>')\n\t.description('Configure the value of the config passing a key')\n\t.action(function(key, value) {\n\t\tmanager.configure(key, value)\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('configuration')\n\t.description('Output configuration')\n\t.action(function(string) {\n\t\toutputConfig(manager.getConfig())\n\t\tEXEC = true\n\t})\n\nprogram\n\t.command('status')\n\t.description('Display timer status')\n\t.alias('st')\n\t.action(function(string) {\n\t\tmanager.getStatus()\n\t\tEXEC = true\n\t})\n\nprogram\n\t.parse(process.argv)\n\n\nif (program.updateDB) {\n\tmanager.update()\n\tEXEC = true\n}\n\nif (!EXEC) {\n\tcliError('You must use a valid command.')\n\tprogram.outputHelp()\n\tprocess.exit(1)\n}\n"]}